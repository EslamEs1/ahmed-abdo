{% extends 'website/base.html' %}
{% load static %}
{% load product_tags %}
{% block content %}
<!-- Hero Section -->
<section class="pharaoh-hero">
  <div class="container">
    <div class="row align-items-center min-vh-100">
      <div class="col-lg-6">
        <div class="hero-content">
          <span class="hero-badge">مجموعة حصرية</span>
          <h1 class="hero-title">{{ collection.name_ar }}</h1>
          <p class="hero-subtitle">{{ collection.description_ar }}</p>
          <div class="hero-features">
            <div class="feature-item">
              <i class="bi bi-award"></i>
              <span>قطن مصري فاخر</span>
            </div>
            <div class="feature-item">
              <i class="bi bi-hand-thumbs-up"></i>
              <span>راحة فائقة</span>
            </div>
            <div class="feature-item">
              <i class="bi bi-stars"></i>
              <span>تصميم عصري</span>
            </div>
          </div>
          <div class="hero-price">
            <span class="price">١٢٩٩ جنيه</span>
            <span class="old-price">١٥٩٩ جنيه</span>
          </div>
          <div class="hero-buttons">
            <a href="#collection" class="btn btn-primary btn-lg">تسوق الآن</a>
            <a href="#features" class="btn btn-outline-primary btn-lg">اكتشف المميزات</a>
          </div>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="hero-image">
          <img src="" alt="{{ collection.name_ar }}" class="img-fluid">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Features Section -->
<section id="features" class="features-section py-5">
  <div class="container">
    <div class="section-header text-center mb-5">
      <h2 class="section-title">لماذا {{ collection.name_ar }}؟</h2>
      <div class="decorative-line"></div>
    </div>
    <div class="row g-4">
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="bi bi-cotton"></i>
          </div>
          <h3>قطن مصري فاخر</h3>
          <p>مصنوع من أجود أنواع القطن المصري طويل التيلة، معروف عالمياً بجودته الفائقة ونعومته المميزة.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="bi bi-rulers"></i>
          </div>
          <h3>خياطة متقنة</h3>
          <p>تم تصنيع كل قطعة بعناية فائقة من قبل أمهر الخياطين المصريين، مع اهتمام خاص بأدق التفاصيل.</p>
        </div>
      </div>
      <div class="col-md-4">
        <div class="feature-card">
          <div class="feature-icon">
            <i class="bi bi-palette"></i>
          </div>
          <h3>تصميم عصري</h3>
          <p>تصاميم تجمع بين الأصالة المصرية والأناقة العصرية، مناسبة لجميع المناسبات.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Collection Section -->
<section id="collection" class="collection-section py-5 bg-light">
  <div class="container">
    <div class="section-header text-center mb-5">
      <h2 class="section-title">اختر منتجك</h2>
      <div class="decorative-line"></div>
    </div>
    <div class="row g-4">
      {% for product in products %}
      <div class="col-md-4">
        <div class="product-card" data-description="{{ product.description_ar }}">
          <div class="product-img-container">
            <img src="{% get_product_image_url product %}" alt="{{ product.name_ar }}" class="product-img">
            <div class="product-actions">
              <button class="action-btn quick-view-btn">
                <i class="bi bi-eye"></i>
              </button>
              <button class="action-btn">
                <i class="bi bi-heart"></i>
              </button>
              <button class="action-btn">
                <i class="bi bi-bag-plus"></i>
              </button>
            </div>
          </div>
          <div class="product-info">
            <h3 class="product-title">{{ product.name_ar }}</h3>
            <div class="product-price">
              <span class="current-price">{{ product.price }} ج.م</span>
              {% if product.old_price %}
              <span class="old-price">{{ product.old_price }} ج.م</span>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-md-4">
        <div class="product-card">
          <div class="product-img-container">
            <img src="images/pharaoh-white.jpg" alt="قميص فرعون أبيض" class="product-img">
            <div class="product-actions">
              <button class="action-btn"><i class="bi bi-cart-plus"></i></button>
              <button class="action-btn"><i class="bi bi-heart"></i></button>
              <button class="action-btn" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i class="bi bi-eye"></i></button>
            </div>
          </div>
          <div class="product-info">
            <h3 class="product-title">قميص فرعون - أبيض</h3>
            <div class="product-price">
              <span class="current-price">١٢٩٩ جنيه</span>
              <span class="old-price">١٥٩٩ جنيه</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="product-card">
          <div class="product-img-container">
            <img src="images/pharaoh-blue.jpg" alt="قميص فرعون أزرق" class="product-img">
            <div class="product-actions">
              <button class="action-btn"><i class="bi bi-cart-plus"></i></button>
              <button class="action-btn"><i class="bi bi-heart"></i></button>
              <button class="action-btn" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i class="bi bi-eye"></i></button>
            </div>
          </div>
          <div class="product-info">
            <h3 class="product-title">قميص فرعون - أزرق</h3>
            <div class="product-price">
              <span class="current-price">١٢٩٩ جنيه</span>
              <span class="old-price">١٥٩٩ جنيه</span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="product-card">
          <div class="product-img-container">
            <img src="images/pharaoh-beige.jpg" alt="قميص فرعون بيج" class="product-img">
            <div class="product-actions">
              <button class="action-btn"><i class="bi bi-cart-plus"></i></button>
              <button class="action-btn"><i class="bi bi-heart"></i></button>
              <button class="action-btn" data-bs-toggle="modal" data-bs-target="#quickViewModal"><i class="bi bi-eye"></i></button>
            </div>
          </div>
          <div class="product-info">
            <h3 class="product-title">قميص فرعون - بيج</h3>
            <div class="product-price">
              <span class="current-price">١٢٩٩ جنيه</span>
              <span class="old-price">١٥٩٩ جنيه</span>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    
    <!-- Pagination -->
    {% if page_obj.has_other_pages %}
    <div class="pagination-section mt-5">
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
              <span aria-hidden="true">السابق</span>
            </a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">السابق</a>
          </li>
          {% endif %}
          
          {% for i in page_obj.paginator.page_range %}
            {% if page_obj.number == i %}
              <li class="page-item active"><a class="page-link" href="#">{{ i }}</a></li>
            {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %}
              <li class="page-item"><a class="page-link" href="?page={{ i }}">{{ i }}</a></li>
            {% endif %}
          {% endfor %}
          
          {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
              <span aria-hidden="true">التالي</span>
            </a>
          </li>
          {% else %}
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">التالي</a>
          </li>
          {% endif %}
        </ul>
      </nav>
    </div>
    {% endif %}
  </div>
</section>

<!-- Sizing Guide -->
<section id="sizing" class="sizing-section py-5">
  <div class="container">
    <div class="section-header text-center mb-5">
      <h2 class="section-title">جدول المقاسات</h2>
      <div class="decorative-line"></div>
    </div>
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="size-table-wrapper">
          <table class="table">
            <thead>
              <tr>
                <th>المقاس</th>
                <th>الصدر (سم)</th>
                <th>الخصر (سم)</th>
                <th>الطول (سم)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>S</td>
                <td>96-101</td>
                <td>81-86</td>
                <td>71-74</td>
              </tr>
              <tr>
                <td>M</td>
                <td>102-107</td>
                <td>87-92</td>
                <td>74-76</td>
              </tr>
              <tr>
                <td>L</td>
                <td>108-113</td>
                <td>93-98</td>
                <td>76-79</td>
              </tr>
              <tr>
                <td>XL</td>
                <td>114-119</td>
                <td>99-104</td>
                <td>79-81</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section py-5 bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8 text-center">
        <div class="newsletter-content">
          <h2 class="newsletter-title">اشترك للحصول على العروض الحصرية</h2>
          <p class="newsletter-text">كن أول من يعلم عن أحدث العروض والمنتجات الجديدة</p>
          <form class="newsletter-form">
            <div class="input-group">
              <input type="email" class="form-control" placeholder="أدخل بريدك الإلكتروني">
              <button class="btn btn-primary" type="submit">اشترك</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Quick View Modal -->
<div class="modal fade" id="quickViewModal" tabindex="-1" aria-labelledby="quickViewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="quickViewModalLabel">عرض سريع</h5>
        <button type="button" class="btn-close ms-0 me-auto" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-md-6 mb-4 mb-md-0">
            <img id="modalProductImage" src="" alt="Product" class="img-fluid rounded">
          </div>
          <div class="col-md-6">
            <h4 id="modalProductName" class="mb-3"></h4>
            <div class="product-price mb-3">
              <span id="modalProductPrice" class="current-price"></span>
              <span id="modalProductOldPrice" class="old-price"></span>
            </div>
            <div class="product-rating mb-3">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-half"></i>
              <span class="rating-count">(24)</span>
            </div>
            <p id="modalProductDescription" class="mb-4"></p>
            <div class="product-size mb-4">
              <h6>المقاس:</h6>
              <div class="size-options">
                <button class="size-btn">S</button>
                <button class="size-btn active">M</button>
                <button class="size-btn">L</button>
                <button class="size-btn">XL</button>
              </div>
            </div>
            <div class="product-color mb-4">
              <h6>اللون:</h6>
              <div class="color-options">
                <button class="color-btn" style="background-color: #000;"></button>
                <button class="color-btn active" style="background-color: #5F4B32;"></button>
                <button class="color-btn" style="background-color: #1A3263;"></button>
              </div>
            </div>
            <div class="product-quantity mb-4">
              <h6>الكمية:</h6>
              <div class="quantity-selector">
                <button class="quantity-btn" id="decreaseQuantity">-</button>
                <input type="number" class="quantity-input" value="1" min="1" max="10">
                <button class="quantity-btn" id="increaseQuantity">+</button>
              </div>
            </div>
            <div class="product-actions">
              <button class="btn btn-primary w-100 mb-2">أضف إلى السلة</button>
              <button class="btn btn-outline-secondary w-100">أضف إلى المفضلة</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
